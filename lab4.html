<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kiến trúc Client-Server: React & Spring Boot</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.8;
            margin: 0;
            padding: 40px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
        }
        .container {
            max-width: 1300px;
            margin: 0 auto;
            background: #fff;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        h2 {
            color: #2980b9;
            margin-top: 30px;
        }
        h3 {
            color: #34495e;
        }
        .section {
            margin-bottom: 50px;
            padding: 20px;
            background: #fafafa;
            border-radius: 10px;
            transition: transform 0.3s;
        }
        .section:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        .diagram {
            text-align: center;
            margin: 30px 0;
        }
        img {
            max-width: 100%;
            height: auto;
            border: 1px solid #ddd;
            border-radius: 10px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background: #3498db;
            color: #fff;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        tr:hover {
            background: #f1f8ff;
        }
        ul {
            padding-left: 25px;
            list-style: square;
        }
        ul li {
            margin-bottom: 10px;
        }
        .highlight {
            background: #e8f4f8;
            padding: 5px 10px;
            border-radius: 5px;
            display: inline-block;
        }
        .sub-list {
            padding-left: 40px;
            list-style: circle;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Phần a: Tên mẫu kiến trúc -->
        <div class="section">
            <h1>a) Tên của mẫu kiến trúc được chọn</h1>
            <p><strong>Mẫu kiến trúc:</strong> <span class="highlight">Kiến trúc Client-Server phân tầng (Layered Client-Server Architecture)</span></p>
            <p><strong>Mô tả chi tiết:</strong> Đây là kiến trúc Client-Server với các tầng: tầng giao diện (Client: React, Tailwind CSS, TypeScript), tầng nghiệp vụ (Backend: Spring Boot API với Controller, Service, Repository), và tầng dữ liệu (Database: SQL Server). Client giao tiếp với Backend qua REST API sử dụng HTTP, với xác thực JWT. Backend xử lý logic nghiệp vụ và truy xuất dữ liệu từ SQL Server qua JPA/Hibernate.</p>
            <p><strong>Lý do chọn:</strong> Phù hợp với hệ thống quản lý học tập trực tuyến, đảm bảo tính đơn giản, tích hợp chặt chẽ giữa React và Spring Boot, hỗ trợ xác thực an toàn qua JWT và lưu trữ dữ liệu quan hệ hiệu quả trong SQL Server.</p>
        </div>

        <!-- Phần b: Biểu đồ kiến trúc -->
        <div class="section">
            <h1>b) Biểu đồ mô tả kiến trúc</h1>
            <div class="diagram">
                <img src="images.svg" alt="Client-Server Architecture Diagram" />
            </div>
            <p><em>Ghi chú: Biểu đồ thể hiện luồng dữ liệu giữa Client (React App), Backend (Spring Boot API), và Database (SQL Server). Client gửi yêu cầu HTTP đến API Controller, Backend xử lý qua các tầng (Controller, Service, Repository) và tương tác với Database. Xác thực được quản lý qua JWT. Các mũi tên biểu thị luồng yêu cầu và phản hồi.</em></p>
        </div>

        <!-- Phần c: Danh sách thành phần -->
        <div class="section">
            <h1>c) Danh sách các thành phần trong kiến trúc</h1>
            <ul>
                <li><strong>Client (React App)</strong>: Bao gồm Browser (User), React App, Axios (HTTP Requests), Router, Tailwind CSS, State Manager, TypeScript.</li>
                <li><strong>Backend (Spring Boot API)</strong>: Bao gồm API Controller, Service Layer, Repository Layer, Security (JWT), Exception Handler, DTO Mapper.</li>
                <li><strong>Database (SQL Server)</strong>: Bao gồm SQL Server DB, SQL Tables.</li>
            </ul>
        </div>

        <!-- Phần d: Mô tả chức năng của từng thành phần -->
        <div class="section">
            <h1>d) Mô tả chức năng của từng thành phần</h1>
            <table>
                <tr>
                    <th>Thành phần</th>
                    <th>Chức năng chi tiết</th>
                </tr>
                <tr>
                    <td>Browser (User)</td>
                    <td>
                        <ul>
                            <li>Hiển thị giao diện người dùng (UI) của React App trên trình duyệt (Chrome, Firefox, v.v.).</li>
                            <li>Cho phép người dùng tương tác (nhấp nút, nhập biểu mẫu, chuyển trang).</li>
                            <li>Gửi hành động người dùng đến React App để xử lý.</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>React App</td>
                    <td>
                        <ul>
                            <li>Quản lý giao diện người dùng động bằng React Components, sử dụng hooks (useState, useEffect).</li>
                            <li>Tích hợp Tailwind CSS (thiết kế responsive), TypeScript (an toàn kiểu), Router (điều hướng), State Manager (quản lý trạng thái).</li>
                            <li>Gửi yêu cầu HTTP đến API Controller qua Axios (ví dụ: GET /api/users, POST /api/auth/login).</li>
                            <li>Xử lý phản hồi JSON để cập nhật UI (hiển thị danh sách, biểu mẫu, v.v.).</li>
                            <li>Lưu trữ JWT token từ Security (JWT) để xác thực các yêu cầu sau.</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Axios (HTTP Requests)</td>
                    <td>
                        <ul>
                            <li>Gửi yêu cầu HTTP (GET, POST, PUT, DELETE) đến API Controller (ví dụ: GET /api/users).</li>
                            <li>Gửi yêu cầu đăng nhập (POST /api/auth/login) và nhận JWT token.</li>
                            <li>Gắn header Authorization: Bearer &lt;JWT&gt; cho các yêu cầu được bảo vệ.</li>
                            <li>Nhận phản hồi JSON và chuyển cho React App xử lý.</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Router</td>
                    <td>
                        <ul>
                            <li>Quản lý điều hướng giữa các trang (React Router): /home, /profile, /courses.</li>
                            <li>Chuyển đổi trang mà không tải lại ứng dụng (single-page application).</li>
                            <li>Truyền tham số URL (ví dụ: /users/:id) để hiển thị chi tiết.</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Tailwind CSS</td>
                    <td>
                        <ul>
                            <li>Cung cấp utility classes (flex, grid, p-4) để thiết kế giao diện responsive.</li>
                            <li>Đảm bảo UI đẹp, nhất quán trên desktop và mobile.</li>
                            <li>Tích hợp với React App để định kiểu React Components.</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>State Manager</td>
                    <td>
                        <ul>
                            <li>Quản lý trạng thái toàn cục (Redux, Context API): thông tin người dùng, danh sách khóa học.</li>
                            <li>Cung cấp cơ chế để React Components truy cập/cập nhật trạng thái.</li>
                            <li>Đồng bộ trạng thái với dữ liệu từ Backend qua Axios.</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>TypeScript</td>
                    <td>
                        <ul>
                            <li>Định nghĩa interfaces/types (ví dụ: interface User { id: number; username: string; }).</li>
                            <li>Kiểm tra kiểu tĩnh, giảm lỗi runtime.</li>
                            <li>Tích hợp với React App để đảm bảo mã an toàn kiểu.</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>API Controller</td>
                    <td>
                        <ul>
                            <li>Định nghĩa REST endpoints (ví dụ: @GetMapping("/api/users"), @PostMapping("/api/courses")).</li>
                            <li>Nhận yêu cầu HTTP từ Axios, gọi Service Layer để xử lý logic.</li>
                            <li>Kiểm tra xác thực qua Security (JWT) (header Authorization).</li>
                            <li>Sử dụng DTO Mapper để chuyển đổi dữ liệu entity sang DTO.</li>
                            <li>Trả về phản hồi JSON (ví dụ: [{id: 1, username: "john"}, ...]).</li>
                            <li>Gọi Exception Handler để xử lý lỗi (400, 404, 500).</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Service Layer</td>
                    <td>
                        <ul>
                            <li>Xử lý logic nghiệp vụ (kiểm tra dữ liệu, tính toán, giao dịch).</li>
                            <li>Gọi Repository Layer để truy xuất/cập nhật dữ liệu.</li>
                            <li>Sử dụng DTO Mapper để chuyển đổi entity sang DTO và ngược lại.</li>
                            <li>Đảm bảo quy tắc nghiệp vụ (ví dụ: kiểm tra quyền trước khi xóa).</li>
                            <li>Trả kết quả (DTO) cho API Controller.</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Repository Layer</td>
                    <td>
                        <ul>
                            <li>Tương tác với SQL Server DB qua JPA/Hibernate.</li>
                            <li>Định nghĩa interface (UserRepository, CourseRepository) với phương thức findAll(), save().</li>
                            <li>Thực hiện truy vấn SQL/JPQL (ví dụ: SELECT * FROM users).</li>
                            <li>Chuyển đổi dữ liệu thành entity (User, Course).</li>
                            <li>Quản lý transaction để đảm bảo toàn vẹn dữ liệu.</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Security (JWT)</td>
                    <td>
                        <ul>
                            <li>Xử lý đăng nhập (POST /api/auth/login), tạo JWT token (alg=HS256, payload: user_id, role).</li>
                            <li>Kiểm tra JWT trong header Authorization cho các yêu cầu bảo vệ.</li>
                            <li>Phân quyền dựa trên role (ROLE_STUDENT, ROLE_TEACHER) với @PreAuthorize.</li>
                            <li>Bảo vệ endpoint nhạy cảm (ví dụ: DELETE /api/users/{id} chỉ dành cho admin).</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>Exception Handler</td>
                    <td>
                        <ul>
                            <li>Bắt ngoại lệ (NullPointerException, ResourceNotFoundException) bằng @ControllerAdvice.</li>
                            <li>Trả mã lỗi HTTP (400, 404, 500) và JSON ({ "error": "User not found" }).</li>
                            <li>Đảm bảo ứng dụng không crash và cung cấp thông tin lỗi rõ ràng.</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>DTO Mapper</td>
                    <td>
                        <ul>
                            <li>Chuyển đổi entity (User) sang DTO (UserDTO), loại bỏ dữ liệu nhạy cảm (password).</li>
                            <li>Chuyển DTO từ client thành entity để lưu vào Database.</li>
                            <li>Sử dụng MapStruct hoặc thủ công để ánh xạ dữ liệu.</li>
                            <li>Tối ưu dữ liệu truyền tải qua API.</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>SQL Server DB</td>
                    <td>
                        <ul>
                            <li>Lưu trữ dữ liệu quan hệ trong các bảng (Users, Courses, Sessions).</li>
                            <li>Hỗ trợ truy vấn SQL/JPA từ Repository Layer.</li>
                            <li>Đảm bảo toàn vẹn dữ liệu qua PK, FK, unique constraints.</li>
                            <li>Cung cấp dữ liệu khi Repository thực hiện truy vấn.</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td>SQL Tables</td>
                    <td>
                        <ul>
                            <li>Lưu trữ dữ liệu cụ thể: Users (id, username, email), Courses (id, name, duration).</li>
                            <li>Hỗ trợ CRUD qua Repository Layer.</li>
                            <li>Đảm bảo mối quan hệ (FK: user_id trong Sessions liên kết với Users).</li>
                        </ul>
                    </td>
                </tr>
            </table>
        </div>

        <!-- Phần e: Công nghệ được chọn -->
        <div class="section">
            <h1>e) Công nghệ được chọn</h1>
            <table>
                <tr>
                    <th>Thành phần</th>
                    <th>Công nghệ/Phần mềm</th>
                    <th>Lý do chọn</th>
                </tr>
                <tr>
                    <td>Client (Frontend)</td>
                    <td>React, Tailwind CSS, TypeScript, Axios, React Router, Redux/Context API</td>
                    <td>React: UI động, tái sử dụng component. Tailwind: Thiết kế nhanh, responsive. TypeScript: An toàn kiểu. Axios: Gọi API dễ dàng. React Router: Điều hướng SPA. Redux/Context: Quản lý trạng thái.</td>
                </tr>
                <tr>
                    <td>Backend Services</td>
                    <td>Spring Boot, Spring Security, Spring Data JPA, MapStruct</td>
                    <td>Spring Boot: REST API, logic nghiệp vụ. Spring Security: Xác thực JWT. Spring Data JPA: Truy xuất Database. MapStruct: Ánh xạ DTO.</td>
                </tr>
                <tr>
                    <td>Database</td>
                    <td>SQL Server</td>
                    <td>Cơ sở dữ liệu quan hệ, truy vấn nhanh, tích hợp tốt với Spring Data JPA.</td>
                </tr>
                <tr>
                    <td>Công cụ hỗ trợ</td>
                    <td>Postman, VS Code, IntelliJ IDEA</td>
                    <td>Postman: Test API. VS Code: Phát triển frontend. IntelliJ: Phát triển backend.</td>
                </tr>
                <tr>
                    <td>Phần cứng</td>
                    <td>Server vật lý hoặc VM (Docker)</td>
                    <td>Triển khai linh hoạt, tối ưu tài nguyên.</td>
                </tr>
            </table>
        </div>
    </div>
</body>
</html>